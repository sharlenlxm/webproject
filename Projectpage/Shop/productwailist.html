
<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title></title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
	<link rel="stylesheet" href="./css/font.css">
	<link rel="stylesheet" href="./css/xadmin.css">
	<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	<script type="text/javascript" src="./lib/layui/layui.js" charset="utf-8"></script>
	<script type="text/javascript" src="./js/xadmin.js"></script>
	<!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
	<link rel="stylesheet" href="./css/cp_list.css">
	<script type="text/javascript" src="./js/jquery.table-filter.min.js"></script>
    <style type="text/css">
    	.x-body{padding-bottom: 0;padding-top: 0;}
    	.layui-table-header{display: none;}
    	.layui-table-click{background: #5FB878;color: #fff;}
    	.layui-table-click:hover{background: #5FB878!important;color: #fff;}
    	.layui-table tr td:nth-child(1){border-right: none;}
    	.layui-table tr td:nth-child(2){border-right: none;}
    	.layui-table tr td:nth-child(2) .layui-table-cell{padding: 0;}
    </style>
	</head>

	<body>
		<div class="x-nav">
			<span class="layui-breadcrumb">
		        <a href="">首页</a>
		        <a href="">第三方管理</a>
		        <a><cite>外卖餐品关联</cite></a>
		      </span>
			<a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" href="javascript:location.replace(location.href);" title="刷新">
				<i class="layui-icon" style="line-height:30px">ဂ</i></a>
		</div>
		<div class="x-body">
			<div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
				<ul class="layui-tab-title">
					<li class="layui-this">美团</li>
					<li>饿了么</li>
				</ul>
				<div class="layui-tab-content">
					<div class="layui-tab-item wmcpk layui-show">
						<div class="layui-row cp_list">
							<div class="layui-col-md5 layui-col-sm5 layui-col-xs5">
								<div class="cp_list_tit">
									<p class="pull_l">华莱士餐品绑定</p>
									<p class="pull_r"><span>${pd.mconcount }</span> 份 / <span>${pd.mallcount }</span> 份</p>
								</div>
								<div class="cp_list_list">
									<!-- <div class="cp_list_list_search">
										<input type="text" class="layui-input" lay-search="" placeholder="请搜索华莱士餐品" />
										<i class="layui-icon layui-icon-search"></i>
									</div> -->
									<div >
									 <input type="search" class="layui-input" id="t-81227206-filtering" placeholder="请搜索华莱士餐品" >
									</div>
									<div class="layui-table-body layui-table-main">
										<table class="layui-hide" id="mSingleProductTable" cellspacing="0" cellpadding="0" border="0" >
										<!--<table class="layui-hide" id="LAY_table_user1" lay-filter="user"></table>-->
										<!--<c:choose>
											<c:when test="${not empty mlist}">
												<c:forEach items="${mlist}" var="detaillist" varStatus="vs">
													<tr class="GG${vs.index+1}" data-index="${vs.index+1}">
														<c:if test="${not empty detaillist.StandardName }">
															<td>${detaillist.SingleProductName}/${detaillist.StandardName}</td>
														</c:if>
														<c:if test="${empty detaillist.StandardName }">
															<td>${detaillist.SingleProductName}</td>
														</c:if>
														
														<td><i class="layui-icon"></i></td>
													
														<c:if test="${not empty detaillist.TakeoutFoodProductsStandardName }">
															<td>${detaillist.TakeoutFoodProductsName}/${detaillist.TakeoutFoodProductsStandardName}</td>
														</c:if>
														<c:if test="${empty detaillist.TakeoutFoodProductsStandardName }">
															<td>${detaillist.TakeoutFoodProductsName}</td>
														</c:if>
													</tr>
												</c:forEach> 
											</c:when>
										</c:choose>-->
									</table>
									</div>
								</div>
							</div>
							<div class="layui-col-md2 layui-col-sm2 layui-col-xs2">
								<button class="layui-btn">切换本地餐品</button>
								<button class="layui-btn">绑定</button>
								<button class="layui-btn layui-btn-danger">解除绑定</button>
							</div>
							<div class="layui-col-md5 layui-col-sm5 layui-col-xs5">
								<div class="cp_list_tit">
									<p class="pull_l">未匹配美团餐品绑定</p>
									<p class="pull_r"><span>96</span> 份</p>
								</div>
								<div class="cp_list_list">
									<div class="cp_list_list_search">
										<input type="text" class="layui-input" lay-search="" placeholder="请搜索美团餐品" />
										<i class="layui-icon layui-icon-search"></i>
									</div>
									<table class="layui-hide" id="LAY_table_user1" lay-filter="user"></table>
								</div>
							</div>
						</div>
					</div>
					<div class="layui-tab-item wmcpk">
						<div class="layui-row cp_list">
							<div class="layui-col-md5 layui-col-sm5 layui-col-xs5">
								<div class="cp_list_tit">
									<p class="pull_l">华莱士餐品绑定</p>
									<p class="pull_r"><span>${pd.econcount }</span> 份 / <span>${pd.eallcount }</span></p>
								</div>
								<div class="cp_list_list">
									<div class="cp_list_list_search">
										<input type="text" class="layui-input" lay-search="" placeholder="请搜索华莱士餐品" />
										<i class="layui-icon layui-icon-search"></i>
									</div>
									<div class="layui-table-body layui-table-main">
										<table class="layui-table" id="eSingleProductTable" cellspacing="0" cellpadding="0" border="0" >
										<c:choose>
											<c:when test="${not empty elist}">
												<c:forEach items="${elist}" var="detaillist" varStatus="vs">
													<tr class="GG${vs.index+1}" data-index="${vs.index+1}">
														<c:if test="${not empty detaillist.StandardName }">
															<td>${detaillist.SingleProductName}/${detaillist.StandardName}</td>
														</c:if>
														<c:if test="${empty detaillist.StandardName }">
															<td>${detaillist.SingleProductName}</td>
														</c:if>
														
														<td><i class="layui-icon"></i></td>
													
														<c:if test="${not empty detaillist.TakeoutFoodProductsStandardName }">
															<td>${detaillist.TakeoutFoodProductsName}/${detaillist.TakeoutFoodProductsStandardName}</td>
														</c:if>
														<c:if test="${empty detaillist.TakeoutFoodProductsStandardName }">
															<td>${detaillist.TakeoutFoodProductsName}</td>
														</c:if>
													</tr>
												</c:forEach> 
											</c:when>
										</c:choose>
									</table>
									</div>
								</div>
							</div>
							<div class="layui-col-md2 layui-col-sm2 layui-col-xs2">
								<button class="layui-btn">切换本地餐品</button>
								<button class="layui-btn">绑定</button>
								<button class="layui-btn layui-btn-danger">解除绑定</button>
							</div>
							<div class="layui-col-md5 layui-col-sm5 layui-col-xs5">
								<div class="cp_list_tit">
									<p class="pull_l">未匹配饿了么餐品绑定</p>
									<p class="pull_r"><span>96</span> 份</p>
								</div>
								<div class="cp_list_list">
									<div class="cp_list_list_search">
										<input type="text" class="layui-input" lay-search="" placeholder="请搜索饿了么餐品" />
										<i class="layui-icon layui-icon-search"></i>
									</div>
									<table class="layui-hide" id="LAY_table_user4" lay-filter="user"></table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript">
	      $(function () {
	        $("#mSingleProductTable").addTableFilter();
	        $("#eSingleProductTable").addTableFilter();
	      });
    </script>
		<script>
			layui.use('table', function() {
				var table = layui.table;

				//方法级渲染
				table.render({
					elem: '#mSingleProductTable',
					url: './js/user30.js',
					height:'full-260',
					cols: [
						[{
							field: 'id',
							title: 'ID',
							width: '43%',
							sort: true,
							event: 'setSign'
						}, {
							field: 'username',
							title: '用户名',
							width: '10%',
							align: 'center',
							event: 'setSign'
						}, {
							field: 'sex',
							title: '性别',
							sort: true,
							event: 'setSign'
						}]
					]
				});

				//方法级渲染
				table.render({
					elem: '#LAY_table_user1',
					url: './js/user30.js',
					height:'full-260',
					cols: [
						[{
							field: 'id',
							title: 'ID',
							width: '43%',
							sort: true,
							event: 'setSign'
						}, {
							field: 'username',
							title: '用户名',
							width: '10%',
							align: 'center',
							event: 'setSign'
						}, {
							field: 'sex',
							title: '性别',
							sort: true,
							event: 'setSign'
						}]
					]
				});

				//方法级渲染
				table.render({
					elem: '#LAY_table_user3',
					url: './js/user30.js',
					height:'full-260',
					cols: [
						[{
							field: 'id',
							title: 'ID',
							width: '43%',
							sort: true,
							event: 'setSign'
						}, {
							field: 'username',
							title: '用户名',
							width: '10%',
							align: 'center',
							event: 'setSign'
						}, {
							field: 'sex',
							title: '性别',
							sort: true,
							event: 'setSign'
						}]
					]
				});

				//方法级渲染
				table.render({
					elem: '#LAY_table_user4',
					url: './js/user30.js',
					height:'full-260',
					cols: [
						[{
							field: 'id',
							title: 'ID',
							width: '43%',
							sort: true,
							event: 'setSign'
						}, {
							field: 'username',
							title: '用户名',
							width: '10%',
							align: 'center',
							event: 'setSign'
						}, {
							field: 'sex',
							title: '性别',
							sort: true,
							event: 'setSign'
						}]
					]
				});
				
				//监听单元格事件
				table.on('tool(user)', function(obj) {
					var data = obj.data;
					if(obj.event === 'setSign') {
						console.log(obj.data); //选中行的相关数据
					}
				});
			});
		</script>
		<script type="text/javascript">
			//单击行勾选checkbox事件
			$(document).on("click", "#SingleProductTable tbody tr", function() {
				var index = $(this).attr('data-index');
				var tableBox = $(this).parents('.layui-table-box');
				//存在固定列
				if(tableBox.find(".layui-table-fixed.layui-table-fixed-l").length > 0) {
					tableDiv = tableBox.find(".layui-table-fixed.layui-table-fixed-l");
				} else {
					tableDiv = tableBox.find(".layui-table-body.layui-table-main");
				}
				//获取已选中列并取消选中
				var trs = tableDiv.find(".layui-unselect.layui-form-checkbox.layui-form-checked").parent().parent().parent();
				for(var i = 0; i < trs.length; i++) {
					var ind = $(trs[i]).attr("data-index");
					if(ind != index) {
						var checkCell = tableDiv.find("tr[data-index=" + ind + "]").find("td div.laytable-cell-checkbox div.layui-form-checkbox I");
						if(checkCell.length > 0) {
							checkCell.click();
						}
					}
				}
				//选中单击行
				var checkCell = tableDiv.find("tr[data-index=" + index + "]").find("td div.laytable-cell-checkbox div.layui-form-checkbox I");
				if(checkCell.length > 0 & trs.length === 1) {
					checkCell.click();
				}
				checkCell.click();
			});
			$(document).on("click", "td div.laytable-cell-checkbox div.layui-form-checkbox", function(e) {
				e.stopPropagation();
			});
		</script>
	</body>

</html>