<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="../../public/css/xadmin.css">
    <script type="text/javascript" src="../../public/js/jquery-3.2.1.js"></script>
    <script type="text/javascript" src="../../public/lib/layui/layui.js"></script>
    <script type="text/javascript" src="../../public/js/xadmin.js"></script>
    <script type="text/javascript" src="../../public/js/hangye.js"></script>
    <script type="text/javascript" src="../../public/js/hangye1.js"></script>
    <script type="text/javascript" src="../../public/js/yinhang.js"></script>
    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]>
      <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
      <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
        .widthauto {
                width: auto !important;
            }
            
            .tips_red {
                color: red;
            }
            
            .layui-form-label {
                padding-left: 0;
                width: 115px;
            }
            
            .layui-input-block {
                margin-left: 115px;
            }
            
            .layui-elem-quote {
                font-size: 18px;
            }
            
            .layui-elem-field legend {
                font-size: 16px;
            }
            
            .layui-upload-img {
                width: 150px;
                height: 150px;
                margin: 0 10px 10px 0;
            }
            
            .Since_inline {
                display: inline-block;
                width: auto !important;
                line-height: 38px;
            }
            
            .layui-elem-quote .layui-form-switch {
                margin: 0 15px;
                margin-top: 0;
            }
        </style>
</head>

<body id="iosiframe">
    <div class="x-body">
        <div class="layui-row">
            <div class="layui-form" action="" lay-filter="cardAdd">
                <blockquote class="layui-elem-quote">商户信息</blockquote>
                <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                    <legend style="font-weight: 500;">图片信息</legend>
                </fieldset>
                <div class="layui-form-item layui-form-text" id="businessLicense1">
                    <!-- <label class="layui-form-label">营业执照</label> -->
                    <div class="layui-input-inline  noGeren" style="margin-left:30px;display: none">
                        <div class="layui-upload-img">
                            <img src="http://static.hongxiaosou.com/public/images/add.jpg" id="businessLicense" style="max-width: 100%;">
                        </div>
                        <div style="width:100%;text-align:center;">营业执照</div>
                    </div>
                    <div class="layui-input-inline" style="margin-left:30px;">
                        <div class="layui-upload-img">
                            <img src="http://static.hongxiaosou.com/public/images/add.jpg" id="cashier" style="max-width: 100%;">
                        </div>
                        <div style="width:100%;text-align:center;">收银台照</div>
                    </div>
                    <div class="layui-input-inline" style="margin-left:30px;">
                        <div class="layui-upload-img">
                            <img src="http://static.hongxiaosou.com/public/images/add.jpg" id="placeBusiness" style="max-width: 100%;">
                        </div>
                        <div style="width:100%;text-align:center;">场景照</div>
                    </div>
                    <div class="layui-input-inline" style="margin-left:30px;">
                        <div class="layui-upload-img">
                            <img src="http://static.hongxiaosou.com/public/images/add.jpg" id="doorheadPhoto" style="max-width: 100%;">
                        </div>
                        <div style="width:100%;text-align:center;">门头照</div>
                    </div>
                </div>
                <!--隐藏-->
                <!--基本信息-->
                <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                    <legend style="font-weight: 500;">文字信息</legend>
                </fieldset>
                <div class="box-item">
                    <div class="layui-form-item" style="display:inline-block;width:500px">
                        <label class="layui-form-label">商户类型</label>
                        <div class="layui-input-block widthauto">
                            <input type="radio" name="merchantType" value="0" title="个人" lay-filter="cardvalid" checked="">
                            <input type="radio" name="merchantType" value="1" title="个体" lay-filter="cardvalid">
                            <input type="radio" name="merchantType" value="2" title="企业" lay-filter="cardvalid">
                        </div>
                    </div>
                    <div class="layui-form-item" style="display:inline-block;width:500px;margin-left:30px">
                        <label class="layui-form-label">商户简称</label>
                        <div class="layui-input-block">
                            <input type="text" name="merchantAbbreviation" lay-verify="title" autocomplete="off" placeholder="请输入商户简称" class="layui-input">
                        </div>
                    </div>
                </div>
                <div class="box-item">
                    <div class="layui-form-item" style="display:inline-block;width:500px">
                        <label class="layui-form-label">商户全称</label>
                        <div class="layui-input-block">
                            <input type="text" name="merchantName" lay-verify="title" autocomplete="off" placeholder="请输入商户全称" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item" id="paymentType2" style="display:inline-block;width:auto;margin-left:30px">
                        <label class="layui-form-label">经营范围</label>
                        <div class="layui-input-block" style="display:inline-block;width:200px;margin-left:0px;">
                            <select name="oneOperate" id="chOne" lay-filter="chOne" lay-verify="title">
                                <!-- <option value="">一级类目</option>
                                <option value="1">互联网</option>
                                <option value="2">科技</option> -->
                            </select>
                        </div>
                        <div class="layui-input-block" style="display:inline-block;width:200px;margin-left:15px;">
                            <select name="twoOperate" id="chTwo" lay-filter="chTwo" lay-verify="">
                            </select>
                        </div>
                        <div class="layui-input-block" style="display:inline-block;width:200px;margin-left:15px">
                            <select name="threeOperate" id="chThr" lay-filter="chThr" lay-verify="">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="box-item">
                    <div class="layui-form-item" style="display:inline-block;width:500px">
                        <label class="layui-form-label">客服手机号</label>
                        <div class="layui-input-block">
                            <input type="text" name="customerServiceTell" lay-verify="title" autocomplete="off" placeholder="请输入客服手机号" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item" style="display:inline-block;width:500px;margin-left:30px">
                        <label class="layui-form-label">费率</label>
                        <div class="layui-input-block">
                            <input type="text" name="rate" lay-verify="title" autocomplete="off" placeholder="请输入费率" class="layui-input">
                        </div>
                    </div>
                </div>
                <div class="box-item noGeren" style="display: none">
                    <div class="layui-form-item BLcn" style="display:inline-block;width:500px">
                        <label class="layui-form-label">营业执照编号</label>
                        <div class="layui-input-block">
                            <input type="text" name="businessLicenseNo" lay-verify="title" autocomplete="off" placeholder="请输入营业执照编号" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item" style="display:inline-block;margin-left:30px">
                        <label class="layui-form-label">营业执照有限期</label>
                        <div class="layui-input-block" style="display:inline-block;width:200px;margin-left:0px;">
                            <input type="text" name="businessLicenseTime" lay-verify="title" autocomplete="off" placeholder="请选择营业执照有效期" class="layui-input" id="businessLicenseTime" >
                        </div>
                        <div style="width:30px;text-align:center;display:inline-block">-</div>
                        <div class="layui-input-block" style="display:inline-block;width:200px;margin-left:5px;">
                            <input type="text" name="businessLicenseEndTime" lay-verify="title" autocomplete="off" placeholder="请选择营业执照有效期" class="layui-input" id="businessLicenseEndTime">
                        </div>
                        <div class="layui-input-block" style="display:inline-block;margin-left:15px;vertical-align:top">
                            <input type="checkbox" name="businessLicenseType" title="长期">
                        </div>
                    </div>
                </div>
                <div class="box-item">
                    <div class="layui-form-item BLcn" style="display:inline-block;width:500px">
                        <label class="layui-form-label">邮箱</label>
                        <div class="layui-input-block">
                            <input type="text" name="mailbox" lay-verify="title" autocomplete="off" placeholder="请输入邮箱" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item" style="display:inline-block;margin-left:30px;vertical-align:top">
                        <label class="layui-form-label">是否开通云闪付</label>
                        <div class="layui-input-block" style="display:inline-block;margin-left:0px;vertical-align:top">
                            <input type="checkbox" name="isOpenYunPay" title="开通">
                        </div>
                    </div>
                </div>
                <div class="box-item">
                    <div class="layui-form-item BLcn" style="display:inline-block;width:500px">
                        <label class="layui-form-label">微信号</label>
                        <div class="layui-input-block">
                            <input type="text" name="weChatNo" lay-verify="title" autocomplete="off" placeholder="请输入微信号" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item BLcn" style="display:inline-block;width:500px;margin-left:30px">
                        <label class="layui-form-label">支付宝号</label>
                        <div class="layui-input-block">
                            <input type="text" name="aliPayNo" lay-verify="title" autocomplete="off" placeholder="请输入支付宝号" class="layui-input">
                        </div>
                    </div>
                </div>
                <div class="box-item">
                    <div class="layui-form-item" id="paymentType2" style="display:inline-block;width:auto">
                        <label class="layui-form-label">公司地址</label>
                        <div class="layui-input-block" style="display:inline-block;width:200px;margin-left:0px;">
                            <select name="province" id="prov" lay-filter="prov" lay-verify="title">
                                <!-- <option value="">一级类目</option>
                                <option value="1">互联网</option>
                                <option value="2">科技</option> -->
                            </select>
                        </div>
                        <div class="layui-input-block" style="display:inline-block;width:200px;margin-left:15px;">
                            <select name="city" id="city" lay-filter="city" lay-verify="">
                            </select>
                        </div>
                        <div class="layui-input-block" style="display:inline-block;width:200px;margin-left:15px">
                            <select name="area" id="area" lay-filter="area" lay-verify="">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item" style="width:755px">
                    <label class="layui-form-label">商户详细地址</label>
                    <div class="layui-input-block">
                        <input type="text" name="address" lay-verify="title" autocomplete="off" placeholder="请输入商户详细地址" class="layui-input">
                    </div>
                </div>
                <blockquote class="layui-elem-quote">法人信息</blockquote>
                <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                    <legend style="font-weight: 500;">图片信息</legend>
                </fieldset>
                <div class="layui-form-item layui-form-text" id="businessLicense1">
                    <!-- <label class="layui-form-label">营业执照</label> -->
                    <div class="layui-input-inline" style="margin-left:30px;">
                        <div class="layui-upload-img">
                            <img src="http://static.hongxiaosou.com/public/images/add.jpg" id="businessLicense" style="max-width: 100%;">
                        </div>
                        <div style="width:100%;text-align:center;">身份证正面</div>
                    </div>
                    <div class="layui-input-inline" style="margin-left:30px;">
                        <div class="layui-upload-img">
                            <img src="http://static.hongxiaosou.com/public/images/add.jpg" id="businessLicense" style="max-width: 100%;">
                        </div>
                        <div style="width:100%;text-align:center;">身份证反面</div>
                    </div>
                    <div class="layui-input-inline geren" style="margin-left:30px;">
                        <div class="layui-upload-img">
                            <img src="http://static.hongxiaosou.com/public/images/add.jpg" id="businessLicense" style="max-width: 100%;">
                        </div>
                        <div style="width:100%;text-align:center;">手持身份证</div>
                    </div>
                </div>
                <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                    <legend style="font-weight: 500;">文字信息</legend>
                </fieldset>
                <div class="box-item">
                    <div class="layui-form-item" style="display:inline-block;width:500px">
                        <label class="layui-form-label">身份证号</label>
                        <div class="layui-input-block">
                            <input type="text" name="juridicalpersonId" lay-verify="title" autocomplete="off" placeholder="请输入身份证号" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item" style="display:inline-block;width:500px;margin-left:30px">
                        <label class="layui-form-label">姓名</label>
                        <div class="layui-input-block">
                            <input type="text" name="juridicalpersonName" lay-verify="title" autocomplete="off" placeholder="请输入姓名" class="layui-input">
                        </div>
                    </div>
                </div>
                <div class="box-item">
                    <div class="layui-form-item BLcn" style="display:inline-block;width:500px">
                        <label class="layui-form-label">手机号</label>
                        <div class="layui-input-block">
                            <input type="text" name="registerCell" lay-verify="title" autocomplete="off" placeholder="请输入手机号" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item" style="display:inline-block;margin-left:30px">
                        <label class="layui-form-label">身份证有效期</label>
                        <div class="layui-input-block" style="display:inline-block;width:200px;margin-left:0px;">
                            <input type="text" name="juridicalpersonIdTime" lay-verify="title" autocomplete="off" placeholder="请选择身份证有效期" class="layui-input" id="juridicalpersonIdTime" >
                        </div>
                        <div style="width:30px;text-align:center;display:inline-block">-</div>
                        <div class="layui-input-block" style="display:inline-block;width:200px;margin-left:5px;">
                            <input type="text" name="juridicalPersonIDEndTime" lay-verify="title" autocomplete="off" placeholder="请选择身份证有效期" class="layui-input" id="juridicalPersonIDEndTime" >
                        </div>
                        <div class="layui-input-block" style="display:inline-block;margin-left:15px;vertical-align:top">
                            <input type="checkbox" name="juridicalPersonIDType" title="长期">
                        </div>
                    </div>
                </div>
                <blockquote class="layui-elem-quote">结算信息</blockquote>
                <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                    <legend style="font-weight: 500;">图片信息</legend>
                </fieldset>
                <div class="layui-form-item layui-form-text" id="businessLicense1">
                    <!-- <label class="layui-form-label">营业执照</label> -->
                    <div class="layui-input-inline qiye" style="margin-left:30px;display:none">
                        <div class="layui-upload-img">
                            <img src="http://static.hongxiaosou.com/public/images/add.jpg" id="businessLicense" style="max-width: 100%;">
                        </div>
                        <div style="width:100%;text-align:center;">开户许可证</div>
                    </div>
                    <div class="layui-input-inline noQiye" style="margin-left:30px;">
                        <div class="layui-upload-img">
                            <img src="http://static.hongxiaosou.com/public/images/add.jpg" id="businessLicense" style="max-width: 100%;">
                        </div>
                        <div style="width:100%;text-align:center;">银行卡正面</div>
                    </div>
                </div>
                <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                    <legend style="font-weight: 500;">文字信息</legend>
                </fieldset>
                <div class="box-item">
                    <div class="layui-form-item" style="display:inline-block;width:500px">
                        <label class="layui-form-label">银行卡号</label>
                        <div class="layui-input-block">
                            <input type="text" name="bankCardNo" lay-verify="title" autocomplete="off" placeholder="请输入银行卡号" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item" style="display:inline-block;width:500px;margin-left:30px">
                        <label class="layui-form-label">开户银行</label>
                        <div class="layui-input-block">
                            <input type="text" name="openingBank" lay-verify="title" autocomplete="off" placeholder="请输入开户银行" class="layui-input">
                        </div>
                    </div>
                </div>
                <div class="box-item">
                    <div class="layui-form-item" style="display:inline-block;width:500px">
                        <label class="layui-form-label">开户支行</label>
                        <div class="layui-input-block">
                            <input type="text" name="openingBankBranch" lay-verify="title" autocomplete="off" placeholder="请输入开户支行" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item" style="display:inline-block;width:500px;margin-left:30px">
                        <label class="layui-form-label">开户支行地区</label>
                        <div class="layui-input-block">
                            <input type="text" name="merchantName" lay-verify="title" autocomplete="off" placeholder="开户支行地区" class="layui-input">
                        </div>
                    </div>
                </div>
                <div class="box-item">
                    <div class="layui-form-item" style="display:inline-block;width:500px">
                        <label class="layui-form-label">预留手机号</label>
                        <div class="layui-input-block">
                            <input type="text" name="reserveCell" lay-verify="title" autocomplete="off" placeholder="请输入商户名称" class="layui-input">
                        </div>
                    </div>
                </div>
                <blockquote class="layui-elem-quote">其他信息</blockquote>
                <div class="box-item">
                    <div class="layui-form-item" style="display:inline-block;width:500px">
                        <label class="layui-form-label">所属服务商</label>
                        <div class="layui-input-block">
                            <input type="text" name="agName" lay-verify="agentName" autocomplete="off" placeholder="请搜索并选择服务商" class="layui-input" id="agName"   onblur="bl()" onfocus="fc()">
                            <div class="layui-input-block" style="position:absolute;top:34px;left:0;z-index:500;max-height:190px;overflow:auto;background-color:#fff;width:100%;margin-left:0;display:none" id="searchBox">
                                <!-- <div class="layui-btn layui-btn-primary" style="width:100%;margin-left:0" >121212</div>
                                    <div class="layui-btn layui-btn-primary" style="width:100%;margin-left:0" >121212</div>
                                    <div class="layui-btn layui-btn-primary" style="width:100%;margin-left:0" >121212</div>
                                    <div class="layui-btn layui-btn-primary" style="width:100%;margin-left:0" >121212</div>
                                    <div class="layui-btn layui-btn-primary" style="width:100%;margin-left:0" >121212</div> -->
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item" style="display:inline-block;width:500px;margin-left:30px">
                        <label class="layui-form-label">所属销售</label>
                        <div class="layui-input-block">
                            <input type="text" name="slName" lay-verify="saleName" autocomplete="off" placeholder="请搜索并选择销售" class="layui-input" id="slName"   onblur="bl1()" onfocus="fc1()">
                        <div class="layui-input-block" style="position:absolute;top:34px;left:0;z-index:500;max-height:190px;overflow:auto;background-color:#fff;width:100%;margin-left:0;display:none" id="searchBox1">
                            <!-- <div class="layui-btn layui-btn-primary" style="width:100%;margin-left:0" >121212</div>
                                <div class="layui-btn layui-btn-primary" style="width:100%;margin-left:0" >121212</div>
                                <div class="layui-btn layui-btn-primary" style="width:100%;margin-left:0" >121212</div>
                                <div class="layui-btn layui-btn-primary" style="width:100%;margin-left:0" >121212</div>
                                <div class="layui-btn layui-btn-primary" style="width:100%;margin-left:0" >121212</div> -->
                        </div>
                        </div>
                    </div>
                </div>
                <div class="box-item" style="margin-bottom:150px">
                    <div class="layui-form-item" style="display:inline-block">
                        <label class="layui-form-label">进件通道</label>
                        <div class="layui-input-block" id="paymentBox" >
                        </div>
                    </div>
                </div>
                <div class="layui-form-item layui-layout-admin">
                    <div class="layui-input-block">
                        <div class="layui-footer" style="left: 0;text-align: center;">
                           <button class="layui-btn" lay-submit="" lay-filter="add">立即提交</button>
                            <button class="layui-btn layui-btn-primary" id="quxiao">取消</button>
                        </div>
                        <!--<i class="layui-icon" lay-tips="推荐追求开发效率和缺乏前端开发经验的使用，后端开发者的最爱。">123123123</i>-->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../../common/config-agent.js"></script>
    <script src="../../common/utility.js"></script>
    <script>
    // var index = parent.layer.getFrameIndex(window.name);
    // $('#quxiao').click(function() {

    //     setTimeout(function() { parent.layer.close(index) }, 16);
    // })
    var userNumber = JSON.parse(sessionStorage.getItem('agentUser')).institutionNumber;
    var server = 'http://192.168.1.107:6005/shanhe-admin/'
    var operlistOne = []
    var operlistTwo = []
    var operlistThr = []
    var prov = []
    var city = []
    var area = []
    var longTime = Date.parse(new Date())
    console.log(longTime)
    var businessLicense = ''
    var cashier = ''
    var placeBusiness = ''
    var doorheadPhoto = ''
    var juridicalpersonIdPositive = ''
    var juridicalpersonIdReverseside = ''
    var holdId = ''
    var openingPermit = ''
    var bankCardPositive = ''
    function bl() {
        setTimeout(function() {
            $('#searchBox').hide()
        }, 200)
        //$('#searchBox').hide()
    }
    function clickS(e) {
        $('#agName').val(e.getAttribute('data-name'))
        $('#agName').attr('agentNumber', e.getAttribute('data-id'))
        $('#agName').attr('agentType', e.getAttribute('data-level'))
        $('#searchBox').hide()
    }
    function fc() {
        $('#searchBox').show()
        CmsUtility.postAjaxCall2(
            //系统设置
            server + 'InsMer/getInsAgent', 
            {
                
                "institutionNumber": userNumber,
                "agentNumber":JSON.parse(sessionStorage.getItem('agentUser')).Number,
                "agentName":$('#agName').val(),
                "page":1,
                "limit":'100',
            },
            function(data) {
                console.log(this.value)
                if (data.code == 1000) {
                    var nb = new Object()
                    nb.agentNumber = JSON.parse(sessionStorage.getItem('agentUser')).Number
                    nb.agentName = JSON.parse(sessionStorage.getItem('agentUser')).agentName
                    data.data.agentlist.unshift(nb)
                    var str = ''
                    for (var i = 0; i < data.data.agentlist.length; i++) {
                        str += '<div class="layui-btn layui-btn-primary"  data-id="' + data.data.agentlist[i].agentNumber + '" data-name="' + data.data.agentlist[i].agentName + '" style="width:100%;margin-left:0" onclick="clickS(this)" >' + '[' + data.data.agentlist[i].agentNumber + ']' + data.data.agentlist[i].agentName + '</div>'
                    }
                    document.getElementById('searchBox').innerHTML = str

                    // layer.msg('保存成功')
                    // setTimeout(function(){
                    //  x_admin_close()
                    // },500);

                } else {
                    var nb = new Object()
                    nb.agentNumber = JSON.parse(sessionStorage.getItem('agentUser')).Number
                    nb.agentName = JSON.parse(sessionStorage.getItem('agentUser')).agentName
                    var str = ''
                        str = '<div class="layui-btn layui-btn-primary"  data-id="' + nb.agentNumber + '" data-name="' + nb.agentName + '" style="width:100%;margin-left:0" onclick="clickS(this)" >' + '[' + nb.agentNumber + ']' + nb.agentName + '</div>'
                    
                    document.getElementById('searchBox').innerHTML = str
                }
            },
            function(data) {
                console.log('222')
            }
        )

    }
    function bl1() {
        setTimeout(function() {
            $('#searchBox1').hide()
        }, 200)
        //$('#searchBox').hide()
    }
function clickS1(e) {
        $('#slName').val(e.getAttribute('data-name'))
        $('#slName').attr('saleNumber', e.getAttribute('data-id'))
        $('#searchBox1').hide()
    }
function fc1() {
        if(!$('#agName').attr('agentnumber')){
            layer.msg('请先选择服务商')
            return
        }
        $('#searchBox1').show()
        console.log($('#slName').val())
        CmsUtility.postAjaxCall2(
            //系统设置
            server + 'InsMer/getAgentSale', 
            {
                
                "agentNumber": $('#agName').attr('agentnumber'),
                "saleName":$('#slName').val(),
                "page":1,
                "limit":'100',
            },
            function(data) {
                console.log(this.value)
                if (data.code == 1000) {

                    var str = ''
                    console.log(data.data.agentSale)
                    for (var i = 0; i < data.data.agentSale.length; i++) {
                        str += '<div class="layui-btn layui-btn-primary" data-id="' + data.data.agentSale[i].saleNumber + '" data-name="' + data.data.agentSale[i].saleName + '" style="width:100%;margin-left:0" onclick="clickS1(this)" >' + '[' + data.data.agentSale[i].saleNumber + ']' + data.data.agentSale[i].saleName + '</div>'
                    }
                    document.getElementById('searchBox1').innerHTML = str

                    // layer.msg('保存成功')
                    // setTimeout(function(){
                    //  x_admin_close()
                    // },500);

                } else {
                    layer.msg(data.msg)
                    $('#searchBox1').hide()

                }
            },
            function(data) {
                console.log('222')
            }
        )

    }     
    // chOne
    // chTwo
    // chThr
    layui.use(['laydate', 'table', 'upload', 'form'], function() {
        var $ = layui.jquery,
            upload = layui.upload,
            laydate = layui.laydate,
            table = layui.table,
            form = layui.form,
            admin = layui.admin,
            element = layui.element,
            layer = layui.layer;
        // var index = layer.load(2, { shade: [0.4, '#393D49'] })
        var tableSelect = layui.tableSelect;
        //查询代理商
         $("#agName").bind('input propertychange', function() {
            console.log(this.value)
            $('#agName').removeAttr('agentNumber')
             $('#agName').removeAttr('agentType')
            document.getElementById('searchBox').innerHTML = ''
           CmsUtility.postAjaxCall2(
            //系统设置
            server + 'InsMer/getInsAgent',
            {
                
                
                 "institutionNumber": userNumber,
                "agentNumber":JSON.parse(sessionStorage.getItem('agentUser')).Number,
                "agentName":$('#agName').val(),
                "page":1,
                "limit":'100',
            },
            function(data) {
                console.log(this.value)
                if (data.code == 1000) {
                    // if(data.data == null){
                    //     layer.msg(data.msg)
                    //     return
                    //    }
                    var str = ''
                    for (var i = 0; i < data.data.agentlist.length; i++) {
                        str += '<div class="layui-btn layui-btn-primary"   data-id="' + data.data.agentlist[i].agentNumber + '" data-name="' + data.data.agentlist[i].agentName + '" style="width:100%;margin-left:0" onclick="clickS(this)" >' + '[' + data.data.agentlist[i].agentNumber + ']' + data.data.agentlist[i].agentName + '</div>'
                    }
                        document.getElementById('searchBox').innerHTML = str


                    } else {
                        layer.msg(data.msg)
                    $('#searchBox').hide()

                    }
                },
                function(data) {
                    console.log('222')
                }
            )
        })
         $("#slName").bind('input propertychange', function() {
            console.log(this.value)
            if(!$('#agName').attr('agentnumber')){
                layer.msg('请先选择服务商')
                return
            }
            $('#slName').removeAttr('agentNumber')
            
            document.getElementById('searchBox1').innerHTML = ''
             CmsUtility.postAjaxCall2(
            //系统设置
            server + 'InsMer/getAgentSale', 
            {
                
                "agentNumber": $('#agName').attr('agentnumber'),
                "saleName":$('#slName').val(),
                "page":1,
                "limit":'100',
            },
            function(data) {
                console.log(this.value)
                if (data.code == 1000) {
                    // if(data.data == null){
                    //     layer.msg(data.msg)
                    //     return
                    //    }
                    var str = ''
                    for (var i = 0; i < data.data.agentSale.length; i++) {
                        str += '<div class="layui-btn layui-btn-primary"  data-id="' + data.data.agentSale[i].saleNumber + '" data-name="' + data.data.agentSale[i].saleName + '" style="width:100%;margin-left:0" onclick="clickS1(this)" >' + '[' + data.data.agentSale[i].saleNumber + ']' + data.data.agentSale[i].saleName + '</div>'
                    }
                        document.getElementById('searchBox1').innerHTML = str


                    } else {
                        layer.msg(data.msg)
                    $('#searchBox1').hide()

                    }
                },
                function(data) {
                    console.log('222')
                }
            )
        })
        CmsUtility.postAjaxCall2(
            //系统设置
            'https://nb.51shanhe.com/shanhe-common/cache/getOperationIds', {
                "institutionNumber": userNumber,
                "paymentType": 4
            },
            function(data) {
                operlist = data.data
                for (var i = 0; i < operlist.length; i++) {
                    var ob1 = new Object()
                    var ob2 = new Object()

                    var ob2List = new Array()
                    ob1.name = operlist[i].supMccNm
                    ob1.id = operlist[i].supMccCd
                    ob2.parId = operlist[i].supMccCd
                    operlistOne.push(ob1)
                    for (var j = 0; j < operlist[i].list.length; j++) {
                        var ob3 = new Object()
                        var ob4 = new Object()
                        var ob4List = new Array()
                        ob3.name = operlist[i].list[j].MccTypeNm
                        ob3.id = operlist[i].list[j].MccType
                        ob4.parId = operlist[i].list[j].MccType
                        ob2List.push(ob3)
                        var operlistThrList = operlist[i].list[j].ids
                        for (var k = 0; k < operlistThrList.length; k++) {
                            var ob5 = new Object()
                            ob5.name = operlistThrList[k].MccNm
                            ob5.id = operlistThrList[k].MccCd
                            ob4List.push(ob5)
                        }
                        ob4.childList = ob4List
                        operlistThr.push(ob4)
                    }
                    ob2.childList = ob2List
                    operlistTwo.push(ob2)
                }
                var str = ''
                for (var i = 0; i < operlistOne.length; i++) {
                    str += "<option value=" + operlistOne[i].id + " >" + operlistOne[i].name + "</option>"
                }
                $('#chOne').html(str)
                var str1 = ''
                for (var j = 0; j < operlistTwo[0].childList.length; j++) {
                    str1 += "<option value=" + operlistTwo[0].childList[j].id + " >" + operlistTwo[0].childList[j].name + "</option>"
                }
                $('#chTwo').html(str1)
                var str2 = ''
                for (var j = 0; j < operlistThr[0].childList.length; j++) {
                    str2 += "<option value=" + operlistThr[0].childList[j].id + " >" + operlistThr[0].childList[j].name + "</option>"
                }
                $('#chThr').html(str2)
                form.render()
            },
            function(data) {

            }
        )
        form.on('select(chOne)', function(data) {
            console.log(data.value)
            var str = ''
            var str1 = ''
            var childId
            for (var i = 0; i < operlistTwo.length; i++) {
                if (operlistTwo[i].parId == data.value) {
                    childId = operlistTwo[i].childList[0].id
                    for (var j = 0; j < operlistTwo[i].childList.length; j++) {

                        str += "<option value=" + operlistTwo[i].childList[j].id + " >" + operlistTwo[i].childList[j].name + "</option>"
                    }
                }
            }
            console.log(childId)
            for (var k = 0; k < operlistThr.length; k++) {
                if (operlistThr[k].parId == childId) {
                    for (var h = 0; h < operlistThr[k].childList.length; h++) {

                        str1 += "<option value=" + operlistThr[k].childList[h].id + " >" + operlistThr[k].childList[h].name + "</option>"
                    }
                }
            }
            $('#chTwo').html(str)
            $('#chThr').html(str1)
            form.render()
        })
        form.on('select(chTwo)', function(data) {
            console.log(data.value)
            var str = ''
            for (var k = 0; k < operlistThr.length; k++) {
                if (operlistThr[k].parId == data.value) {
                    for (var h = 0; h < operlistThr[k].childList.length; h++) {

                        str += "<option value=" + operlistThr[k].childList[h].id + " >" + operlistThr[k].childList[h].name + "</option>"
                    }
                }
            }
            $('#chThr').html(str)
            form.render()

        })
        CmsUtility.postAjaxCall2(
            //系统设置
            'https://nb.51shanhe.com/shanhe-common/cache/getAreajson02', 
            {
                // "institutionNumber": userNumber,
                // "paymentType": 4
            },
            function(data) {
                citylist = data.data
                for (var i = 0; i < citylist.length; i++) {
                    var ob1 = new Object()
                    var ob2 = new Object()

                    var ob2List = new Array()
                    ob1.name = citylist[i].provName
                    ob1.id = citylist[i].provCode
                    ob2.parId = citylist[i].provCode
                    prov.push(ob1)
                    for (var j = 0; j < citylist[i].cityList.length; j++) {
                        var ob3 = new Object()
                        var ob4 = new Object()
                        var ob4List = new Array()
                        ob3.name = citylist[i].cityList[j].cityName
                        ob3.id = citylist[i].cityList[j].cityCode
                        ob4.parId = citylist[i].cityList[j].cityCode
                        ob2List.push(ob3)
                        var arealist = citylist[i].cityList[j].areaList
                        for (var k = 0; k < arealist.length; k++) {
                            var ob5 = new Object()
                            ob5.name = arealist[k].areaName
                            ob5.id = arealist[k].areaCode
                            ob4List.push(ob5)
                        }
                        ob4.childList = ob4List
                        area.push(ob4)
                    }
                    ob2.childList = ob2List
                    city.push(ob2)
                }
                var str = ''
                for (var i = 0; i < prov.length; i++) {
                    str += "<option value=" + prov[i].id + " >" + prov[i].name + "</option>"
                }
                $('#prov').html(str)
                // console.log(operlistTwo)
                var str1 = ''
                for (var j = 0; j < city[0].childList.length; j++) {
                    str1 += "<option value=" + city[0].childList[j].id + " >" + city[0].childList[j].name + "</option>"
                }
                $('#city').html(str1)
                var str2 = ''
                for (var j = 0; j < area[0].childList.length; j++) {
                    str2 += "<option value=" + area[0].childList[j].id + " >" + area[0].childList[j].name + "</option>"
                }
                $('#area').html(str2)
                form.render()
            },
            function(data) {

            }
        )
        form.on('select(prov)', function(data) {
            console.log(data.value)
            var str = ''
            var str1 = ''
            var childId
            for (var i = 0; i < city.length; i++) {
                if (city[i].parId == data.value) {
                    childId = city[i].childList[0].id
                    for (var j = 0; j < city[i].childList.length; j++) {

                        str += "<option value=" + city[i].childList[j].id + " >" + city[i].childList[j].name + "</option>"
                    }
                }
            }
            console.log(childId)
            for (var k = 0; k < area.length; k++) {
                if (area[k].parId == childId) {
                    for (var h = 0; h < area[k].childList.length; h++) {

                        str1 += "<option value=" + area[k].childList[h].id + " >" + area[k].childList[h].name + "</option>"
                    }
                }
            }
            $('#city').html(str)
            $('#area').html(str1)
            form.render()
        })
        form.on('select(city)', function(data) {
            console.log(data.value)
            var str = ''
            for (var k = 0; k < area.length; k++) {
                if (area[k].parId == data.value) {
                    for (var h = 0; h < area[k].childList.length; h++) {

                        str += "<option value=" + area[k].childList[h].id + " >" + area[k].childList[h].name + "</option>"
                    }
                }
            }
            $('#area').html(str)
            form.render()

        })
        laydate.render({
            elem: '#businessLicenseTime' //指定元素
        });
        laydate.render({
            elem: '#businessLicenseEndTime' //指定元素
        });
        laydate.render({
            elem: '#juridicalpersonIdTime' //指定元素
        });
        laydate.render({
            elem: '#juridicalPersonIDEndTime' //指定元素
        });
        form.on('radio(cardvalid)', function(data) { //设置会员卡的有效期
            
            if (data.value == 0) {
                $('.noGeren').hide()
                $('.geren').show()
                $('.qiye').hide()
                $('.noQiye').show()
            } else if (data.value == 1) {
                $('.noGeren').show()
                $('.geren').hide()
                $('.qiye').hide()
                $('.noQiye').hide()
            } else if (data.value == 2) {
               $('.noGeren').show()
               $('.geren').hide()
               $('.qiye').show()
               $('.noQiye').hide()
            }
        });

        //营业执照
        var uploadInst = upload.render({
            elem: '#businessLicense',
            url: server + 'InsMer/uploadMerchantImg',
            data: {
                "institutionNumber": userNumber,
                "merchantNumber":'',
                "longTime":longTime,
                "type":1
            },
            before: function(obj) {
                console.log(obj)
                //预读本地文件示例，不支持ie8
               var index = layer.load(2, { shade: [0.4, '#393D49'] })
            },
            done: function(res) {
                layer.closeAll()
                //如果上传失败
                if (res.code != 1000) {
                    
                    return layer.msg('上传失败');

                } else {

                        $('#businessLicense').attr('src', res.data); //图片链接（base64）
                    
                    businessLicense = res.data
                    return layer.msg('上传成功');

                }
                //上传成功
                console.log(res)
            },
            error: function() {
                
            }
        });
        //收银台照
        var uploadInst = upload.render({
            elem: '#cashier',
            url: server + 'InsMer/uploadMerchantImg',
            data: {
                "institutionNumber": userNumber,
                "merchantNumber":'',
                "longTime":longTime,
                "type":13
            },
            before: function(obj) {
                console.log(obj)
                //预读本地文件示例，不支持ie8
               var index = layer.load(2, { shade: [0.4, '#393D49'] })
            },
            done: function(res) {
                layer.closeAll()
                //如果上传失败
                if (res.code != 1000) {
                    
                    return layer.msg('上传失败');

                } else {

                        $('#cashier').attr('src', res.data); //图片链接（base64）
                    
                    cashier = res.data
                    return layer.msg('上传成功');

                }
                //上传成功
                console.log(res)
            },
            error: function() {
                
            }
        });
        //场景照
        var uploadInst = upload.render({
            elem: '#placeBusiness',
            url: server + 'InsMer/uploadMerchantImg',
            data: {
                "institutionNumber": userNumber,
                "merchantNumber":'',
                "longTime":longTime,
                "type":14
            },
            before: function(obj) {
                console.log(obj)
                //预读本地文件示例，不支持ie8
               var index = layer.load(2, { shade: [0.4, '#393D49'] })
            },
            done: function(res) {
                layer.closeAll()
                //如果上传失败
                if (res.code != 1000) {
                    
                    return layer.msg('上传失败');

                } else {

                        $('#placeBusiness').attr('src', res.data); //图片链接（base64）
                    
                    placeBusiness = res.data
                    return layer.msg('上传成功');

                }
                //上传成功
                console.log(res)
            },
            error: function() {
                
            }
        });
        //门头照
        var uploadInst = upload.render({
            elem: '#doorheadPhoto',
            url: server + 'InsMer/uploadMerchantImg',
            data: {
                "institutionNumber": userNumber,
                "merchantNumber":'',
                "longTime":longTime,
                "type":5
            },
            before: function(obj) {
                console.log(obj)
                //预读本地文件示例，不支持ie8
               var index = layer.load(2, { shade: [0.4, '#393D49'] })
            },
            done: function(res) {
                layer.closeAll()
                //如果上传失败
                if (res.code != 1000) {
                    
                    return layer.msg('上传失败');

                } else {

                        $('#doorheadPhoto').attr('src', res.data); //图片链接（base64）
                    
                    doorheadPhoto = res.data
                    return layer.msg('上传成功');

                }
                //上传成功
                console.log(res)
            },
            error: function() {
                
            }
        });
        //身份证正面
        

        var uploadInst = upload.render({
            elem: '#juridicalpersonIdPositive',
            url: server + 'InsMer/uploadMerchantImg',
            data: {
                "institutionNumber": userNumber,
                "merchantNumber":'',
                "longTime":longTime,
                "type":2
            },
            before: function(obj) {
                console.log(obj)
                //预读本地文件示例，不支持ie8
               var index = layer.load(2, { shade: [0.4, '#393D49'] })
            },
            done: function(res) {
                layer.closeAll()
                //如果上传失败
                if (res.code != 1000) {
                    
                    return layer.msg('上传失败');

                } else {

                        $('#juridicalpersonIdPositive').attr('src', res.data); //图片链接（base64）
                    
                    juridicalpersonIdPositive = res.data
                    return layer.msg('上传成功');

                }
                //上传成功
                console.log(res)
            },
            error: function() {
                
            }
        });
        //身份证反面
        
        var uploadInst = upload.render({
            elem: '#juridicalpersonIdReverseside',
            url: server + 'InsMer/uploadMerchantImg',
            data: {
                "institutionNumber": userNumber,
                "merchantNumber":'',
                "longTime":longTime,
                "type":3
            },
            before: function(obj) {
                console.log(obj)
                //预读本地文件示例，不支持ie8
               var index = layer.load(2, { shade: [0.4, '#393D49'] })
            },
            done: function(res) {
                layer.closeAll()
                //如果上传失败
                if (res.code != 1000) {
                    
                    return layer.msg('上传失败');

                } else {

                        $('#juridicalpersonIdReverseside').attr('src', res.data); //图片链接（base64）
                    
                    juridicalpersonIdReverseside = res.data
                    return layer.msg('上传成功');

                }
                //上传成功
                console.log(res)
            },
            error: function() {
                
            }
        });
        //手持身份证
        
        var uploadInst = upload.render({
            elem: '#holdId',
            url: server + 'InsMer/uploadMerchantImg',
            data: {
                "institutionNumber": userNumber,
                "merchantNumber":'',
                "longTime":longTime,
                "type":11
            },
            before: function(obj) {
                console.log(obj)
                //预读本地文件示例，不支持ie8
               var index = layer.load(2, { shade: [0.4, '#393D49'] })
            },
            done: function(res) {
                layer.closeAll()
                //如果上传失败
                if (res.code != 1000) {
                    
                    return layer.msg('上传失败');

                } else {

                        $('#holdId').attr('src', res.data); //图片链接（base64）
                    
                    holdId = res.data
                    return layer.msg('上传成功');

                }
                //上传成功
                console.log(res)
            },
            error: function() {
                
            }
        });
        //开户许可证
        
        var uploadInst = upload.render({
            elem: '#openingPermit',
            url: server + 'InsMer/uploadMerchantImg',
            data: {
                "institutionNumber": userNumber,
                "merchantNumber":'',
                "longTime":longTime,
                "type":12
            },
            before: function(obj) {
                console.log(obj)
                //预读本地文件示例，不支持ie8
               var index = layer.load(2, { shade: [0.4, '#393D49'] })
            },
            done: function(res) {
                layer.closeAll()
                //如果上传失败
                if (res.code != 1000) {
                    
                    return layer.msg('上传失败');

                } else {

                        $('#openingPermit').attr('src', res.data); //图片链接（base64）
                    
                    openingPermit = res.data
                    return layer.msg('上传成功');

                }
                //上传成功
                console.log(res)
            },
            error: function() {
                
            }
        });
        //银行卡正面
        
        var uploadInst = upload.render({
            elem: '#bankCardPositive',
            url: server + 'InsMer/uploadMerchantImg',
            data: {
                "institutionNumber": userNumber,
                "merchantNumber":'',
                "longTime":longTime,
                "type":6
            },
            before: function(obj) {
                console.log(obj)
                //预读本地文件示例，不支持ie8
               var index = layer.load(2, { shade: [0.4, '#393D49'] })
            },
            done: function(res) {
                layer.closeAll()
                //如果上传失败
                if (res.code != 1000) {
                    
                    return layer.msg('上传失败');

                } else {

                        $('#bankCardPositive').attr('src', res.data); //图片链接（base64）
                    
                    bankCardPositive = res.data
                    return layer.msg('上传成功');

                }
                //上传成功
                console.log(res)
            },
            error: function() {
                
            }
        });
        //通道
         CmsUtility.postAjaxCall2(
            //系统设置
            server + 'InsMer/getInstitutionPayments', 
            {
                "institutionNumber": userNumber,
            },
            function(data) {
               console.log(data)
               var payList = data.data
                var str = ''
                for (var k = 0; k < payList.length; k++) {
                  
                            // str += "<option value=" + payList[k].id + " data-type="+ payList[k].type +" >" + payList[k].paymentchannelname + "</option>"
                            str +=  '<input type="checkbox" data-id='+ payList[k].id +'  data-type='+ payList[k].paymentType +' name="payment" title='+payList[k].paymentChannelName  +'>'
                      
                }
                $('#paymentBox').html(str)
                form.render()
                console.log(str)
            },
            function(data) {

            },
            'get'
        )
        form.on('submit(add)', function(data, index) {
            console.log(data)

            var tjData = data.field
            tjData.agentNumber  = $('#agName').attr('agentnumber')
            tjData.saleNumber  = $('#slName').attr('salenumber')
            tjData.businessLicense = businessLicense
            tjData.cashier = cashier
            tjData.placeBusiness = placeBusiness
            tjData.doorheadPhoto = doorheadPhoto
            tjData.juridicalpersonIdPositive = juridicalpersonIdPositive
            tjData.juridicalpersonIdReverseside = juridicalpersonIdReverseside
            tjData.holdId = holdId
            tjData.openingPermit = openingPermit
            tjData.bankCardPositive = bankCardPositive

             console.log(tjData)
            return false;
        });
    })


































































    // CmsUtility.postAjaxCall(
    //     //系统设置
    //     CmsConfig.addressUrl.Agent.getAgMerchant, {
    //         "orderNumber": oData.orderNumber
    //     },
    //     function(data) {
    //         if (data.code == 1000) {

    //             var saleInfo = JSON.parse(sessionStorage.getItem('rate'))
    //             if (saleInfo != null) {
    //                 console.log(saleInfo)
    //                 rateD0 = saleInfo.productSwitch.split('&');
    //                 rateD1 = saleInfo.productSwitchD1.split('&');

    //                 if (saleInfo.productSwitchD1.indexOf('|') > -1) {
    //                     for (var i = 0; i < rateD1.length; i++) {
    //                         rate1.push(rateD1[i].split('|')[1])
    //                         rateId1.push(rateD1[i].split('|')[0])
    //                     }
    //                 } else {
    //                     for (var i = 0; i < rateD1.length; i++) {
    //                         rate1.push(rateD1[i])
    //                     }
    //                 }
    //                 if (saleInfo.productSwitch.indexOf('|') > -1) {
    //                     for (var i = 0; i < rateD0.length; i++) {
    //                         rate2.push(rateD0[i].split('|')[1])
    //                         rateId2.push(rateD0[i].split('|')[0])
    //                     }
    //                 } else {
    //                     for (var i = 0; i < rateD0.length; i++) {
    //                         rate2.push(rateD0[i])
    //                     }
    //                 }
    //             }

    //             var bankData = data.data.merchantBankCardInfo

    //             sessionStorage.setItem("bankData", JSON.stringify(bankData));
    //             jgData = Object.assign(data.data.merchantBankCardInfo, data.data.merchantRegisterInfo)
    //             console.log(bankData)
    //             switch (jgData.merchantType) {
    //                 case "个人":
    //                     jgData.merchantType = 0
    //                     $('.BLcn').hide()
    //                     break;
    //                 case "个体":
    //                     jgData.merchantType = 1
    //                     $('.BLcn').show()
    //                     break;
    //                 case "企业":
    //                     jgData.merchantType = 2
    //                     $('.BLcn').show()
    //                     break;
    //             }

    //             var serverUrl = window.parent.serverUrl

    //             var address
    //             var p = [],
    //                 c = [],
    //                 aa = []
    //             layui.use(['laydate', 'table', 'upload', 'form'], function() {
    //                 var $ = layui.jquery,
    //                     upload = layui.upload,
    //                     laydate = layui.laydate,
    //                     table = layui.table,
    //                     form = layui.form,
    //                     admin = layui.admin,
    //                     element = layui.element,
    //                     layer = layui.layer;
    //                 var index = layer.load(2, { shade: [0.4, '#393D49'] })
    //                 var tableSelect = layui.tableSelect;

    //                 CmsUtility.postAjaxCall(
    //                     //系统设置
    //                     CmsConfig.addressUrl.Public.getAreajson, {},
    //                     function(data) {
    //                         sessionStorage.setItem("address", data.data);
    //                         address = JSON.parse(data.data)
    //                         for (var i = 0; i < address.length; i++) {
    //                             var a = new Object()
    //                             a.provinceCode = address[i].value
    //                             a.provinceName = address[i].text
    //                             p.push(a)
    //                             var b = new Object()
    //                             b.provinceCode = address[i].value
    //                             b.children = []
    //                             for (var k = 0; k < address[i].children.length; k++) {
    //                                 var d = new Object()
    //                                 d.cityCode = address[i].children[k].value
    //                                 d.cityName = address[i].children[k].text
    //                                 b.children.push(d)
    //                                 var e = new Object()
    //                                 e.cityCode = address[i].children[k].value
    //                                 e.childeren = []
    //                                 for (var j = 0; j < address[i].children[k].children.length; j++) {
    //                                     var t = new Object()
    //                                     t.areaCode = address[i].children[k].children[j].value
    //                                     t.areaName = address[i].children[k].children[j].text
    //                                     e.childeren.push(t)
    //                                 }
    //                                 aa.push(e)
    //                             }
    //                             c.push(b)

    //                         }
    //                         if (jgData.provinceID) {
    //                             var str = '<option value="">请选择省</option>'
    //                             for (var i1 = 0; i1 < p.length; i1++) {
    //                                 if (jgData.provinceID == p[i1].provinceCode) {
    //                                     str += '<option value="' + p[i1].provinceCode + '" selected="">' + p[i1].provinceName + '</option>'
    //                                 } else {
    //                                     str += '<option value="' + p[i1].provinceCode + '">' + p[i1].provinceName + '</option>'
    //                                 }

    //                             }
    //                             $('#provice').html(str)
    //                         }
    //                         if (jgData.cityID) {
    //                             var str1 = '<option value="">请选择市</option>'
    //                             for (var i3 = 0; i3 < c.length; i3++) {

    //                                 if (jgData.provinceID == c[i3].provinceCode) {

    //                                     for (var i2 = 0; i2 < c[i3].children.length; i2++) {

    //                                         if (jgData.cityID == c[i3].children[i2].cityCode) {
    //                                             console.log(c[i3].children[i2])
    //                                             str1 += '<option value="' + c[i3].children[i2].cityCode + '" selected="">' + c[i3].children[i2].cityName + '</option>'
    //                                         } else {
    //                                             str1 += '<option value="' + c[i3].children[i2].cityCode + '">' + c[i3].children[i2].cityName + '</option>'
    //                                         }

    //                                     }
    //                                 }
    //                             }
    //                             $('#city').html(str1)
    //                         }
    //                         if (jgData.areaID) {
    //                             var str2 = '<option value="">请选择县区</option>'
    //                             for (var i4 = 0; i4 < aa.length; i4++) {

    //                                 if (jgData.cityID == aa[i4].cityCode) {

    //                                     for (var i5 = 0; i5 < aa[i4].childeren.length; i5++) {

    //                                         if (jgData.areaID == aa[i4].childeren[i5].areaCode) {
    //                                             console.log(aa[i4].childeren[i5])
    //                                             str2 += '<option value="' + aa[i4].childeren[i5].areaCode + '" selected="">' + aa[i4].childeren[i5].areaName + '</option>'
    //                                         } else {
    //                                             str2 += '<option value="' + aa[i4].childeren[i5].areaCode + '">' + aa[i4].childeren[i5].areaName + '</option>'
    //                                         }

    //                                     }
    //                                 }
    //                             }
    //                             $('#area').html(str2)
    //                         }

    //                         bankData = JSON.parse(sessionStorage.getItem("bankData"))
    //                         var ssstr = ''
    //                         if (jgData.rateType == 'D1') {

    //                             if (rateId1.length == 0) {
    //                                 for (var g = 0; g < rate1.length; g++) {
    //                                     ssstr += '<option value="' + rate1[g] + '">' + rate1[g] + '</option>'
    //                                 }
    //                             } else {

    //                                 for (var g = 0; g < rate1.length; g++) {
    //                                     ssstr += '<option value="' + rateId1[g] + '">' + rate1[g] + '</option>'
    //                                 }
    //                             }
    //                         } else {

    //                             if (rateId2.length == 0) {
    //                                 for (var g = 0; g < rate2.length; g++) {
    //                                     ssstr += '<option value="' + rate2[g] + '">' + rate2[g] + '</option>'
    //                                 }
    //                             } else {
    //                                 for (var g = 0; g < rate2.length; g++) {
    //                                     ssstr += '<option value="' + rateId2[g] + '">' + rate2[g] + '</option>'
    //                                 }
    //                             }
    //                         }

    //                         $('#rate').html(ssstr)
    //                         var zhiHang = '<option value="">请搜索选择开户支行</option>'
    //                         zhiHang += '<option value="' + bankData.openingBankBranchID + '">' + bankData.openingBankBranch + '</option>'
    //                         $('#bankBranchNumber').html(zhiHang)
    //                         form.render()
    //                         form.val('cardAdd', {
    //                             "merchantType": jgData.merchantType.toString(),
    //                             "merchantName": jgData.merchantName,
    //                             "businessLicenseNo": jgData.businessLicenseNo,
    //                             "businessLicenseTime": jgData.businessLicenseTime,
    //                             "businessLicenseName": jgData.businessLicenseName,
    //                             "businessLicenseEndTime": jgData.businessLicenseEndTime,
    //                             "juridicalpersonName": jgData.juridicalpersonName,
    //                             "juridicalpersonId": jgData.juridicalpersonId,
    //                             "juridicalpersonIdTime": jgData.juridicalpersonIdTime,
    //                             "juridicalPersonIDEndTime": jgData.juridicalPersonIDEndTime,
    //                             "juridicalPersonIDType": jgData.juridicalPersonIDType,
    //                             "businessLicenseType": jgData.businessLicenseType,
    //                             "registerCell": jgData.registerCell,
    //                             "oneOperate": jgData.oneOperate,
    //                             "oneOperate1": jgData.operationId,
    //                             "twoOperate": jgData.twoOperate,
    //                             "threeOperate": jgData.threeOperate,
    //                             // "province":jgData.province,
    //                             // "city":jgData.city,
    //                             // "area":jgData.area,
    //                             "address": jgData.address,
    //                             "openingBank": bankData.openingBankID,
    //                             "openingBankBranch": bankData.openingBankBranchID,
    //                             "bankCardNo": bankData.bankCardNo,
    //                             "rateType": jgData.rateType,
    //                             "rate": jgData.rate1,
    //                             "mailbox": jgData.mailbox,
    //                             "quaType": jgData.qualityClient,
    //                         })
    //                         // $('#bankNumber').attr('data-id',bankData.openingBankID)
    //                         // $('#bankBranchNumber').attr('data-id',bankData.openingBankBranchID)
    //                         if (jgData.qualityClient == 0) {
    //                             $('#rate3').hide()
    //                         } else {
    //                             $('#rate3').show()
    //                         }
    //                         if (jgData.merchantType == 0) {
    //                             $('#rateType3').hide()
    //                         } else {
    //                             $('#rateType3').show()
    //                         }
    //                         if (jgData.juridicalPersonIDType == 0) {
    //                             $('#jurIsLong').hide()
    //                         } else if (data.value == 1) {
    //                             $('#jurIsLong').show()
    //                         }
    //                         CmsUtility.postAjaxCall(
    //                             //系统设置
    //                             CmsConfig.addressUrl.Agent.getMerPhoto, {
    //                                 "orderNumber": jgData.orderNumber
    //                             },
    //                             function(data) {
    //                                 console.log(data)
    //                                 layer.closeAll()
    //                                 jgImgData = data.data[0]
    //                                 console.log(jgImgData.bankCardPositive)
    //                                 imageShow('juridicalpersonIdPositive')
    //                                 imageShow('juridicalpersonIdReverseside')
    //                                 imageShow('businessLicense')
    //                                 imageShow('facePhoto')
    //                                 imageShow('doorheadPhoto')
    //                                 imageShow('bankCardPositive')
    //                                 imageShow('holdId')
    //                                 imageShow('openingPermit')
    //                                 imageShow('cashier')
    //                                 imageShow('placeBusiness')
    //                                 imageShow('rests')

    //                             },
    //                             function(data) {

    //                             }
    //                         )

    //                         form.render()
    //                     },
    //                     function(data) {
    //                         console.log(data)
    //                     },
    //                 )
    //                 //表单初始赋值


    //                 form.render()
    //                 form.on('select(provice)', function(data) {
    //                     console.log(data)
    //                     var str1 = '<option value="">请选择市</option>'
    //                     for (var i3 = 0; i3 < c.length; i3++) {

    //                         if (data.value == c[i3].provinceCode) {

    //                             for (var i2 = 0; i2 < c[i3].children.length; i2++) {


    //                                 str1 += '<option value="' + c[i3].children[i2].cityCode + '">' + c[i3].children[i2].cityName + '</option>'


    //                             }
    //                         }
    //                     }
    //                     $('#city').html(str1)
    //                     var str2 = '<option value="">请选择县区</option>'
    //                     $('#area').html(str2)
    //                     form.render()

    //                 })
    //                 form.on('select(city)', function(data) {

    //                     var str2 = '<option value="">请选择县区</option>'
    //                     for (var i4 = 0; i4 < aa.length; i4++) {
    //                         console.log(aa[i4].cityCode)
    //                         if (data.value == aa[i4].cityCode) {
    //                             for (var i5 = 0; i5 < aa[i4].childeren.length; i5++) {


    //                                 str2 += '<option value="' + aa[i4].childeren[i5].areaCode + '">' + aa[i4].childeren[i5].areaName + '</option>'


    //                             }
    //                         }
    //                     }
    //                     $('#area').html(str2)
    //                     form.render()

    //                 })
    //                 form.on('select(chOne)', function(data) {
    //                     console.log(data)
    //                     CmsUtility.chooseTwo(data.value)
    //                     setTimeout(function() {
    //                         form.render()
    //                     }, 500)

    //                 })
    //                 form.on('select(chTwo)', function(data) {
    //                     console.log($('#chOne').val(), data.value)
    //                     CmsUtility.chooseThr($('#chOne').val(), data.value)
    //                     setTimeout(function() {
    //                         form.render()
    //                     }, 500)

    //                 })
    //                 laydate.render({
    //                     elem: '#businessLicenseTime' //指定元素
    //                 });
    //                 laydate.render({
    //                     elem: '#juridicalpersonIdTime' //指定元素
    //                 });
    //                 /*---------- 普通图片上传 ----------*/
    //                 var uploadInst = upload.render({
    //                     elem: '#test1',
    //                     url: '/upload/',
    //                     before: function(obj) {
    //                         //预读本地文件示例，不支持ie8
    //                         obj.preview(function(index, file, result) {
    //                             $('#demo1').attr('src', result); //图片链接（base64）
    //                         });
    //                     },
    //                     done: function(res) {
    //                         //如果上传失败
    //                         if (res.code > 0) {
    //                             return layer.msg('上传失败');
    //                         }
    //                         //上传成功
    //                     },
    //                     error: function() {
    //                         //演示失败状态，并实现重传
    //                         var demoText = $('#demoText');
    //                         demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
    //                         demoText.find('.demo-reload').on('click', function() {
    //                             uploadInst.upload();
    //                         });
    //                     }
    //                 });

    //                 /*---------- 自定义验证规则 ----------*/
    //                 form.verify({
    //                     title: function(value) {
    //                         if (!value) {
    //                             return '必填项不能为空！';
    //                         }
    //                     },
    //                     pass: [/^[0-9A-Za-z]{6,12}$/, '密码必须6到12位'],
    //                     repass: function(value) {
    //                         if ($('#passWord').val() != $('#repassWord').val()) {
    //                             return '两次密码不一致';
    //                         }
    //                     }

    //                 });
    //                 $('#branchS').on('input change', 'input', function(data) { //监听input的值的变化
    //                     return
    //                     var value = this.value;
    //                     if (inputTrue == false) {
    //                         this.value = ''
    //                         inputTrue = true
    //                     }

    //                     clearTimeout(timer)
    //                     timer = setTimeout(function() {
    //                         console.log(132132)
    //                         var obj = new Object();
    //                         obj.bankCode = $('#bankNumber').val(),
    //                             obj.bankName = value,
    //                             obj.page = pageNum,
    //                             obj.limit = 20,
    //                             obj.paymentType = jgData.paymentType
    //                         $.ajax({
    //                             type: 'POST',
    //                             url: CmsConfig.ServiceUrl.ApiRootUrl + CmsConfig.addressUrl.Public.selectBank,
    //                             data: JSON.stringify(obj),
    //                             // Headers:{
    //                             //   "Content-Type":"application/json",
    //                             // },
    //                             contentType: "application/json",
    //                             success: function(res) {
    //                                 var branchData = res.data.selectBank
    //                                 console.log(branchData)
    //                                 var zhiHang = '<option value="">请搜索选择开户支行</option>'
    //                                 for (var v = 0; v < branchData.length; v++) {
    //                                     zhiHang += '<option value="' + branchData[v].lbnkNo + '">' + branchData[v].lbnkNm + '</option>'
    //                                 }

    //                                 $('#bankBranchNumber').html(zhiHang)
    //                                 //form.render()
    //                             },
    //                             beforeSend: function() {

    //                             }
    //                         });
    //                     }, 500)



    //                 });
    //                 /*---------- 监听开关 ----------*/
    //                 form.on('radio(cardvalid)', function(data) { //设置会员卡的有效期
    //                     if (data.value == 0) {
    //                         $('#rateType3').hide()
    //                         $('#yyzz').hide()
    //                         $('.BLcn').hide()
    //                     } else if (data.value == 1) {
    //                         $('#rateType3').show()
    //                         $('#yyzz').show()
    //                         $('.BLcn').show()
    //                     } else if (data.value == 2) {
    //                         $('#rateType3').show()
    //                         $('#yyzz').show()
    //                         $('.BLcn').show()
    //                     }
    //                 });
    //                 //身份证是否长期
    //                 form.on('radio(jurIsLong)', function(data) { //
    //                     if (data.value == 0) {
    //                         $('#jurIsLong').hide()
    //                     } else if (data.value == 1) {
    //                         $('#jurIsLong').show()
    //                     }
    //                 });
    //                 //营业执照是否长期
    //                 form.on('radio(busIsLong)', function(data) { //
    //                     if (data.value == 0) {
    //                         $('#busIsLong').hide()
    //                     } else if (data.value == 1) {
    //                         $('#bIsLong').show()
    //                     }
    //                 });
    //                 //是否为优质商户
    //                 //
    //                 form.on('radio(qua)', function(data) { //
    //                     console.log(data)
    //                     if (data.value == 0) {
    //                         $('#rate3').hide()
    //                     } else if (data.value == 1) {
    //                         $('#rate3').show()
    //                     }
    //                 });

    //                 $('#subaaa').click(function(res) {
    //                     //创建异步对象  
    //                     // var xhr = new XMLHttpRequest();
    //                     // //设置请求的类型及url
    //                     // //post请求一定要添加请求头才行不然会报错
    //                     //  xhr.open('post', CmsConfig.ServiceUrl.ApiRootUrl + CmsConfig.addressUrl.Mechanism.insertMerchantRegisterInfo );
    //                     // xhr.setRequestHeader("Content-type","application/json");

    //                     // //发送请求
    //                     // xhr.send(JSON.stringify(jgData));
    //                     // xhr.onreadystatechange = function () {
    //                     //     // 这步为判断服务器是否正确响应
    //                     //   if (xhr.readyState == 4 && xhr.status == 200) {
    //                     //     console.log(xhr.responseText);
    //                     //   } 
    //                     // };
    //                     $.ajax({
    //                         type: 'POST',
    //                         url: CmsConfig.ServiceUrl.ApiRootUrl + CmsConfig.addressUrl.Mechanism.insertMerchantRegisterInfo,
    //                         data: JSON.stringify(jgData),
    //                         contentType: "application/json",
    //                         success: function(res) {
    //                             console.log(res)
    //                         },
    //                         beforeSend: function() {

    //                         }
    //                     });

    //                 })
    //                 /*---------- 监听提交 ----------*/
    //                 form.on('submit(add)', function(data, index) {



    //                     console.log(jgData)

    //                     return false;
    //                 });

    //             });
    //             console.log(jgData)
    //         } else {
    //             layer.msg(data.msg)
    //         }
    //     },
    //     function(data) {
    //         console.log('222')
    //     },
    // )
    </script>
</body>

</html>