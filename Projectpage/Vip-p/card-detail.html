<!DOCTYPE html>

<html>

	<head>
		<meta charset="utf-8">
		<title>创建会员卡</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<link rel="stylesheet" type="text/css" href="./css/reset.css" media="all" />
		<link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_1192462_mdqp29rjfwp.css" media="all" />
		<link rel="stylesheet" type="text/css" href="./css/style.css" media="all">
		<style type="text/css">
			[v-cloak] {
				display: none;
			}
		</style>
	</head>
	<body>
		<div class="cardAdd" id="cardAdd">
			<div class="vipBlock Topupj">
				<div class="cardListuli ">
					<div class="cardListuliPos cardListuliLT">
						<span class="cardName">一级会员</span>
					</div>
				</div>
				<p class="vipBlockBtit">充值优惠</p>
				<ul class="TopupUl">
					<li class="TopupUli">
						<div class="TopupUliL">
							充值满
							<input type="number" class="Topupamount" placeholder="例:100" value="100" />
							元，优惠
							<input type="number" class="Giveamount" placeholder="例:5" value="5" />
							元
						</div>
						<div class="TopupUliR" @click='addList'>
							<i class="icon iconfont iconjia1"></i>
							添加
						</div>
					</li>
					<li class="TopupUli" v-for='(item,i) in onsale'>
						<div class="TopupUliL">
							充值满
							<input type="number" class="Topupamount" v-model="item.Topupamount" />
							元，优惠
							<input type="number" class="Giveamount" v-model="item.Giveamount" />
							元
						</div>
						<div class="TopupUliR" @click="removelist(i)">
							<i class="icon iconfont iconjian1"></i>
							删除
						</div>
					</li>
				</ul>
			</div>
			<div class="vipBlock giving">
				<p class="vipBlockBtit">激活卡赠送</p>
				<div class="Activateamount">
					激活赠送金额:
					<input type="number" id="" value="20" placeholder="请输入金额" />
					元
				</div>
				<div class="selectdefault">
					<div class="checkB">
						<input type="checkbox" name="" id="statementBtn" value="" checked="" />
						<label for="statementBtn"></label>
					</div>
					<div>将该会员卡设为默认会员类型</div>
				</div>
				<p class="vipBlockBTips">*激活赠送金额自动存入余额，可直接使用</p>
				<p class="vipBlockBTips">*设置合理的赠送金额，能帮助您以会员卡方式快速回笼资金<br />&nbsp;&nbsp;还可调动顾客的消费积极性，建议首次激活卡合理赠送金额</p>
			</div>
			<div class="viprecordsave" @click="viprecordsave">
				<span class="viprecordsavebtn">保 存</span>
			</div>
		</div>
	</body>
	<script src="./js/jquery.min.js"></script>
	<script src="./common/config.js"></script>
	<script src="./common/utility.js"></script>
	<script src="./js/vue.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			var cardChoose, onsale, cardBglv, vipCardbgClass, newImg
			cardBglv = window.location.href.split('?')[1]
			newImg = document.createElement("img");
			newImg.src = './img/vipCard-bg' + cardBglv + '.png';
			newImg.className = 'img'
			$(".cardListuliLT").after(newImg);
			cardChoose = 0 //默认选中会员卡
			onsale = []
			//输入框获取焦点
			$("input").focus(function() {
				$(".viprecordsave").hide();
			});
			//输入框失去焦点
			$("input").blur(function() {
				$(".viprecordsave").show();
			});
			new Vue({
				el: '#cardAdd',
				data: {
					chooseCS: '',
					onsale: onsale,
					cardBglv: cardBglv,
					vipCardbgClass: '',
					nextTodoId: 1,
					cardChoose: cardChoose,
				},
				methods: {
					// 选择会员卡背景
					chooseC: function(d, n) {
						this.chooseCS = n
					},
					//添加优惠条件
					addList: function() {
						onsale.push({
							Topupamount: "",
							Giveamount: ""
						})
						// console.log(this.onsale)
					},
					//删除选中行
					removelist: function(n) {
						onsale.splice(n, 1);
					},
					//提交信息
					viprecordsave: function() {
						var onsaleNum = $(".Topupamount").length
						// onsale.push({
						// 	Topupamount: $(".Topupamount").eq(0).val(),
						// 	Giveamount: $(".Giveamount").eq(0).val()
						// })
						console.log($(".Topupamount").eq(0).val())
					}
				},
				watch: {

				},
				created: function() {
					var that = this
				}
			})
		})
	</script>
</html>
